# Database Seeding Guide

## ğŸ¯ What Can You Populate Without API Keys?

At this stage, you can populate these tables **without any external API keys**:

### âœ… Ready to Populate

| Table | Status | Dependencies | Command |
|-------|--------|--------------|---------|
| **users** | âœ… Ready | None | Already have demo user |
| **tours** | âœ… Ready | None | `npm run seed:tours` |
| **bookings** | âœ… Ready | users + tours | `npm run seed:bookings` |
| **reviews** | âœ… Ready | users + tours | `npm run seed:bookings` |
| **chat_messages** | âœ… Ready | users (optional) | `npm run seed:chat` |

### âš ï¸ Need API Keys (Skip for Now)

| Table | Status | Why Skip |
|-------|--------|----------|
| **payments** | âŒ Skip | Needs Stripe/Chapa API keys |
| **orders** | âŒ Skip | Typically needs payment processing |

### âš™ï¸ Auto-Generated (Don't Touch)

| Table | Status | Note |
|-------|--------|------|
| **refresh_tokens** | âš™ï¸ Auto | Generated by auth system |
| **password_reset_tokens** | âš™ï¸ Auto | Generated on password reset |
| **email_verification_tokens** | âš™ï¸ Auto | Generated on registration |

## ğŸš€ Quick Start

### Option 1: Seed Everything at Once
```bash
npm run seed:all
```

This will populate:
- âœ… Demo user (if not exists)
- âœ… 5 sample tours
- âœ… 3 sample bookings
- âœ… 2 sample reviews
- âœ… 5 sample chat messages

### Option 2: Seed Individual Tables

```bash
# Seed only tours
npm run seed:tours

# Seed bookings and reviews
npm run seed:bookings

# Seed chat messages
npm run seed:chat
```

## ğŸ“Š Sample Data Included

### Tours (5 tours)
1. **Historic Route of Ethiopia** - 8 days, Cultural, Featured
2. **Simien Mountains Trekking** - 6 days, Adventure, Featured
3. **Danakil Depression Expedition** - 5 days, Adventure, Featured
4. **Omo Valley Cultural Tour** - 7 days, Cultural
5. **Bale Mountains Wildlife Safari** - 5 days, Wildlife

### Bookings (3 bookings)
- Linked to demo user
- Various statuses (CONFIRMED, PENDING)
- Scheduled for future dates

### Reviews (2 reviews)
- 5-star and 4-star ratings
- Verified reviews
- Linked to tours and demo user

### Chat Messages (5 messages)
- Common tourist questions
- AI responses about Ethiopia
- Travel tips and information

## ğŸ” Verify Your Data

After seeding, you can verify the data:

```bash
# Open Prisma Studio to browse data
npm run prisma:studio
```

Or check counts programmatically:

```bash
node -e "const { PrismaClient } = require('@prisma/client'); const p = new PrismaClient(); Promise.all([p.tour.count(), p.booking.count(), p.review.count(), p.chatMessage.count()]).then(([tours, bookings, reviews, chats]) => { console.log('Tours:', tours); console.log('Bookings:', bookings); console.log('Reviews:', reviews); console.log('Chats:', chats); p.\$disconnect(); });"
```

## ğŸ¨ Customizing Sample Data

You can edit the seed files to customize the data:

- `seed-tours.js` - Modify tour details, prices, descriptions
- `seed-bookings-reviews.js` - Change booking dates, review content
- `seed-chat.js` - Add more Q&A pairs

## ğŸ§¹ Cleaning Up

To remove all seeded data and start fresh:

```bash
# Reset database (WARNING: Deletes all data!)
npx prisma migrate reset

# Then re-seed
npm run seed:all
```

## ğŸ“ Demo User Credentials

After seeding, you can login with:
- **Email:** demo@example.com
- **Password:** Demo123!

## ğŸ¯ What's Next?

Once you have sample data:

1. **Test the frontend** - Browse tours, view bookings
2. **Test search/filter** - Try filtering tours by category
3. **Test booking flow** - Create new bookings (payment will be skipped)
4. **Test reviews** - Add reviews to tours
5. **Test chat** - View chat history

## ğŸ’¡ Tips

- Run `seed:all` whenever you reset your database
- Tours are the foundation - seed them first
- Bookings and reviews need tours to exist
- You can run seed scripts multiple times (they skip duplicates)
- Use Prisma Studio to manually edit data if needed

## ğŸ› Troubleshooting

**"Demo user not found"**
- Run: `node create-demo-user.js`

**"No tours found"**
- Run: `npm run seed:tours`

**Duplicate errors**
- The scripts skip existing data, so this is normal

**Need to start fresh?**
- Run: `npx prisma migrate reset` then `npm run seed:all`
